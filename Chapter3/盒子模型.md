

不知道诸位有没有玩过 《我的世界(Minecraft)》呢?， 在这个世界中，方块无处不在，人物通过方块创造世界，小的方块叠加成大的方块，逐渐叠加成整个世界。在 HTML 和 CSS 世界也是类似， 卡片（方块）无处不在，我们通过卡片展示信息，小的卡片逐渐组合，组合成板块、组合成页面，最终变成一整个网站。

接下来，我们会用卡片的例子来介绍盒子模型的相关知识。

## 卡片的 padding 与 margin
在拿到一张设计图的时候，比较难的一个点就是判断如何什么时候用 margin， 什么时候用 padding 了，在学会使用 margin/padding 之前，我们需要知道它们是什么：

> padding属性设置一个元素的内边距，padding 区域指一个元素的内容和其边界之间的空间，该属性不能为负值。
>
>  margin属性为给定元素设置所有四个（上下左右）方向的外边距属性。这是四个外边距属性设置的简写。

依照规范，padding 用于设置卡片与卡片内部的元素之间的距离， margin 用于设置卡片与卡片之间的距离。

但是这样的描述依然很含糊，在没有 background 和 border 的情况下，我们并不能很明确的判断某一块间距是属于内边距还是外边距。

更令人困惑的是：

![图片](https://uploader.shimo.im/f/C32jA4OIV6cmLi1U.png!thumbnail)

上图， 高度 x 可以理解为黄盒子的内边距，也可以理解为蓝盒子的外边距，这就让人很烦恼了。

但是为了我们在页面重构的时候更快更有效，复用性更高，我总结了以下几种情况以及推荐使用的方式：

### 卡片包含卡片
![图片](https://uploader.shimo.im/f/29G0UyEvSggr5ugY.png!thumbnail)

第一种情况也是相对简单一些的情况， YellowCard 内包含 BlueCard，我们可以用CSS来表示这种情况：

```
.yellow-card {
  padding-top: 20px;
  padding-left: 20px;
}
```
然而，我们发现 A 与 B 既还可以看成 BlueCard 的外边距。对于垂直方向的边距来说，如果我们给 Blue 设置 margin 来代替给 Yellow 设置 padding：

```
.blue-card {
  margin-top: 20px;
}
```
却出现了以下的问题：

![图片](https://uploader.shimo.im/f/QdLop4az5XkQPPic.png!thumbnail)

因为发生了垂直方向的 margin 合并，设置的 margin-top 并没有达到我们想要的效果，需要对 Yellow 进行 BFC，但是无论哪一种 BFC 方式，都会产生或大或小的后遗症，此时我们就可以选择将边距 A 理解成 Yellow 的内边距，改为给 Yellow 设置 padding，此时垂直方向的问题就解决了。

因为 HTML 文档流的水平方向的规则与垂直方向的规则并不一样，并且水平方向并不会发生 margin 合并，所以水平方向的考量与垂直方向也有不同，

上文提到在 Yellow 内只有 Blue 的情况下，我们推荐垂直方向使用padding， 为了水平方向的统一与易读，建议也使用 padding， 但是当 Blue 的 width 不固定，并且想使 Blue 水平居中的话，就需要将间距设置为 Blue 的 margin 代替 Yellow 的padding了。

### 包含多个卡片
 除了 Yellow 内只有一个 Blue 盒子，还有很多复杂的场景，比如：多个盒子并排显示

![图片](https://uploader.shimo.im/f/SSE67gJTo64Myg60.png!thumbnail)

当多个 Card 并排显示的时候，怎么照顾他们的 margin 和 padding？

Card 并排显示，对垂直方向没有影响，垂直方向可以继续依照之前的策略，在没有额外要求的情况下使用 padding。

因为 Blue 和 Pink 在水平方向居中，所以我们需要 B = D，但是 如果 B 使用 Blue 的 margin-left, D 使用 Pink 的 margin-right， 很明显 B、 D 又不是一体的了，并且这样也实现不了元素宽度位置垂直居中，所以我们需要让 B 和 D 依托到另外一个盒子上：我们需要给 Blue 和 Pink 再增加一个父元素 BluePinkWarp，同时 BluePinkWarp 是 Yellow 的子元素，如下：

![图片](https://uploader.shimo.im/f/ZSdAMAiv4Zg4fs2U.png!thumbnail)

我们让 White 来完成 B 和 D，给 White 添加 margin-left 和 margin-right 分别作为 B 和 D

那么还有另外一个问题， C 是属于 Blue 的还是 Pink的？

只有两个 Card 的情况局限，如果是多个 Card 并列呢？ 了解 Bootstrap 的栅格系统的小伙伴会发现，栅格系统使用的方式是再分别给 Blue、Pink 一个父元素，对父元素设置 padding ，使 paddingLeft + paddingRight = C,并且 paddingLeft = paddingRight.

就我而言我在个人工程项目内，使用的方式是 C 属于  Blue 的 margin-right，那么 Card多了之后，最后一个 margin-right 如何处理呢？方法在上篇文章「多栏元素」中已经有啦，使用父元素的负边距令最后一个 margin-right 消失。

以上我们演示了 padding 与 margin 之间的爱恨情仇，这也是前端重构中我们避免不了的核心知识点—**盒子模型。**

## 巧用BoxSizing
首先要了解盒子模型，盒子模型分为标准盒子模型和怪异盒子模型：

> 标准盒子模型： width = content 
>
> > 怪异盒子模型： width = content + padding + border

在一些低版本的 IE 浏览器展示的是怪异盒子模型，为了编写 CSS 逻辑的统一，需要避免IE 触发怪异盒模型：使用`<!DOCTYPE html>`声明，告诉IE采用W3C盒子模型。

但是在一些情况下，使用 box-sizing 可以更好的帮助我们计算盒子的宽度。

首先了解 box-sizing 的属性：

**Content-box**: 即标准盒模型 width = content

**Border-box** : 即IE盒模型 width = content + padding + border

**Inherit**: 继承父元素的 box-sizing 属性

当 UI 给我们的设计稿有类似这样的模型：

![图片](https://uploader.shimo.im/f/Xr8aPf8IHYwvbH0o.png!thumbnail)

我们其实不好计算/测量 content 的宽度，此时将 box-sizing:border-box,然后：

![图片](https://uploader.shimo.im/f/7lvkPXt4lCEenilr.png!thumbnail)

这样我们并不用计算 content 就可以还原设计稿了，比较方便。

不过要注意 box-sizing 并不支持 IE6，IE7(其实感觉这一句是废话)，在需要兼容 IE6/7 的情况并不可以使用啦

我在搜索的过程中发现 box-sizing: border-box 比想象中的好用，但是为什么在我平时编写代码的过程中很少使用  border-box 呢？知乎有问题：[为什么「box-sizing:border-box」没有被广泛采用？](https://www.zhihu.com/question/20691294)总结起来就是：

1. 开发者不知道
2. 兼容性差（回答时间大多是 13-14年，表示对 IE6/7的兼容性提出的疑问）
3. Box-sizing:border-box 大多数场景可以使用 calc() 替代，而 calc() 有很多不能用 border-box 替代

针对1：我认为大多数开发者是知道的，但是不知道为什么不使用。

针对2: 现在都 9102 年了，除了一些特殊为特殊机关单位写的网站我认为可以不用考虑 IE6/7 的兼容了。

针对3: 我没有想到上面我描述的场景有什么方式可以使用 calc() 替代，并且 calc() 的兼容性比 box-sizing  差很多。使用 calc() 还是 box-sizing 大家可以自行判断。

但是下面 button 的位置如何确定呢？请听下回分解。

## Extra
搞清楚了 盒子与之间的关系， 很多问题都可以解决了，比如说 Card 的Title 如何放置，Content 如何放置，等等。但是还有额外的细节需要我们解决：

![图片](https://uploader.shimo.im/f/mn3Kro7ArDsjX6wr.png!thumbnail)

Title后面额外的显示以及操作， 是使用 float 布局还是使用 absolute？我认为分两种情况：

如果 Extra 的位置在 header 部分上垂直居中，我推荐使用 float:right 使 Extra 右移

但是如果 Extra 的位置不是垂直居中的，而是偏上或者偏下，那么我认为使用 absolute 更好一些，这种情景下使用 float 计算位置更为繁琐。

## 复用
这里其实是聊一些额外的东西，复用其实是一个与 html 语意化相关的问题，当多个 Card 结构与布局相似时，写太多同样的代码不但会影响 CSS 文件的整洁，还会影响代码的易读性和可维护性（其实主要是影响心情）

我们需要借助一点小手段来保持代码整洁（心情愉快）：

我在最开始页面重构的时候会犯一个错误：一点一点写细节代码，正确的做法应该是先分析网页整体的结构，再进行细节的推敲。要做到「一览众山小」。

这样才能对整体的结构有更深刻的认识，更容易的抽离出公共样式

